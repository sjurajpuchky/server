INCLUDE(CheckIncludeFiles)
OPTION(WITH_URING "Enable liburing usage" OFF)
IF(WITH_URING)
  FIND_LIBRARY(LIBURING uring)
  CHECK_INCLUDE_FILES(liburing.h HAVE_LIBURING_H)
  IF (NOT LIBURING)
    MESSAGE(FATAL_ERROR "Can't find liburing")
  ELSEIF(NOT HAVE_LIBURING_H)
    MESSAGE(FATAL_ERROR "Can't find liburing.h")
  ELSE()
    ADD_DEFINITIONS(-DHAVE_URING)
    LINK_LIBRARIES(uring)
  ENDIF()
ENDIF()
